{"version":3,"sources":["../../../../src/services/passport/local.strategy.js"],"names":["passport","require","LocalStrategy","Strategy","mongodb","MongoClient","module","exports","use","usernameField","passwordField","username","password","done","url","connect","err","db","collection","findOne","results","user","message","console","log"],"mappings":";;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AAAA,IACIC,gBAAgBD,QAAQ,gBAAR,EAA0BE,QAD9C;AAAA,IAEIC,UAAUH,QAAQ,SAAR,EAAmBI,WAFjC;;AAIAC,OAAOC,OAAP,GAAiB,YAAY;AAC3BP,aAASQ,GAAT,CAAa,IAAIN,aAAJ,CAAkB;AAC3BO,uBAAe,UADY;AAE3BC,uBAAe;AAFY,KAAlB,EAIT,UAAUC,QAAV,EAAoBC,QAApB,EAA8BC,IAA9B,EAAoC;AAChC,YAAIC,MAAM,2DAAV;;AAEAV,gBAAQW,OAAR,CAAgBD,GAAhB,EAAqB,UAAUE,GAAV,EAAeC,EAAf,EAAmB;AACpC,gBAAIC,aAAaD,GAAGC,UAAH,CAAc,OAAd,CAAjB;AACAA,uBAAWC,OAAX,CAAmB,EAACR,UAAUA,QAAX,EAAnB,EACI,UAAUK,GAAV,EAAeI,OAAf,EAAwB;AACpB,oBAAGA,WAAW,IAAX,IAAmBA,QAAQR,QAAR,KAAqBA,QAA3C,EAAqD;AACjD,wBAAIS,OAAOD,OAAX;AACAP,yBAAK,IAAL,EAAWQ,IAAX;AACH,iBAHD,MAGO;AACHR,yBAAK,IAAL,EAAW,KAAX,EAAkB,EAACS,SAAS,gBAAV,EAAlB;AACAC,4BAAQC,GAAR;AACH;AACJ,aATL;AAUH,SAZD;AAaH,KApBQ,CAAb;AAqBD,CAtBD","file":"local.strategy.js","sourcesContent":["var passport = require('passport'),\n    LocalStrategy = require('passport-local').Strategy,\n    mongodb = require('mongodb').MongoClient;\n\nmodule.exports = function () {\n  passport.use(new LocalStrategy({\n      usernameField: 'userName',\n      passwordField: 'password'\n    },\n      function (username, password, done) {\n          var url = 'mongodb://kacper:kacper@ds155192.mlab.com:55192/standupdb';\n\n          mongodb.connect(url, function (err, db) {\n              var collection = db.collection('users');\n              collection.findOne({username: username},\n                  function (err, results) {\n                      if(results != null && results.password === password) {\n                          var user = results;\n                          done(null, user);\n                      } else {\n                          done(null, false, {message: 'Wrong password'});\n                          console.log(`wrong password`);\n                      }\n                  });\n          });\n      }));\n};"]}